<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>Light of the Hour · 세계의 시간, 하나의 전구</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
  *{box-sizing:border-box;margin:0;padding:0;}

  body{
    min-height:100vh;
    background:#020307;
    color:#f5f4f2;
    font-family: system-ui, -apple-system, BlinkMacSystemFont,
      "SF Pro Text", "Noto Sans KR", sans-serif;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:16px;
    transition:background 1s ease;
  }

  .layer{
    position:relative;
    width:100%;
    max-width:960px;
    border-radius:24px;
    padding:80px 24px 40px;
    background:
      radial-gradient(circle at 50% -10%, rgba(255,255,255,0.02) 0%, transparent 50%),
      radial-gradient(circle at 50% 120%, rgba(0,0,0,0.9) 0%, #000 65%);
    box-shadow:0 40px 80px rgba(0,0,0,0.9);
    overflow:hidden;
  }

  /* 상단 도시 버튼 */
  .locations{
    position:absolute;
    top:18px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    justify-content:center;
    padding:8px 14px;
    border-radius:999px;
    background:rgba(0,0,0,0.7);
    backdrop-filter:blur(14px);
    z-index:10;
  }

  .loc-btn{
    border:none;
    outline:none;
    padding:4px 12px;
    border-radius:999px;
    background:transparent;
    color:#f5f4f2;
    font-size:11px;
    letter-spacing:0.14em;
    text-transform:uppercase;
    opacity:0.6;
    cursor:pointer;
    transition:background 0.25s ease, opacity 0.25s ease, transform 0.2s ease;
    white-space:nowrap;
  }
  .loc-btn:hover{
    opacity:0.9;
  }
  .loc-btn.is-active{
    opacity:1;
    background:rgba(255,255,255,0.12);
    transform:translateY(-1px);
  }

  /* 전구 전체 래퍼 */
  .bulb-wrap{
    position:absolute;
    left:50%;
    top:40%;
    transform:translate(-50%,-50%);
    width:min(44vmin,360px);
    height:min(44vmin,360px);
    pointer-events:none;
  }

  /* 뒤쪽 glow */
  .bulb-glow{
    position:absolute;
    inset:-28%;
    border-radius:50%;
    background:
      radial-gradient(circle,
        rgba(255,240,210,0.75) 0%,
        rgba(255,200,130,0.5) 35%,
        transparent 72%);
    filter:blur(22px);
    opacity:0.3;
    transition:background 1.4s ease, opacity 1.4s ease, filter 1.4s ease;
    animation:breathe 14s ease-in-out infinite;
  }

  /* 유리 구체 */
  .bulb-glass{
    position:absolute;
    inset:6%;
    border-radius:50%;
    background:
      radial-gradient(circle at 30% 20%, rgba(255,255,255,0.32), transparent 45%),
      radial-gradient(circle at 70% 80%, rgba(0,0,0,0.45), transparent 55%),
      radial-gradient(circle at 50% 55%, #27201b, #120d0a 70%);
    box-shadow:
      0 18px 40px rgba(0,0,0,0.7),
      inset 0 0 18px rgba(0,0,0,0.8);
    overflow:hidden;
  }

  /* 유리 안쪽 코어(빛) */
  .bulb-core{
    position:absolute;
    left:50%;
    top:52%;
    width:56%;
    height:56%;
    transform:translate(-50%,-50%);
    border-radius:50%;
    background:
      radial-gradient(circle,
        rgba(255,252,240,0.96) 0%,
        rgba(255,232,180,0.88) 26%,
        rgba(255,190,120,0.6) 45%,
        rgba(40,24,12,0.0) 70%);
    opacity:0.0;
    filter:blur(2px);
    transition:background 1.4s ease, opacity 1.4s ease, filter 1.4s ease;
  }

  /* 필라멘트 */
  .bulb-filament{
    position:absolute;
    left:50%;
    top:48%;
    width:32%;
    height:4%;
    transform:translate(-50%,-50%);
    border-radius:999px;
    background:linear-gradient(to right,
      rgba(140,90,40,0.0),
      rgba(255,210,150,0.85),
      rgba(140,90,40,0.0));
    opacity:0.0;
    transition:opacity 1.4s ease, filter 1.4s ease;
    filter:blur(0.5px);
  }

  /* 텍스트 */
  .content{
    position:relative;
    margin-top: min(40vmin,320px);
    padding-top:42px;
    padding-bottom:8px;
    text-align:center;
    background:linear-gradient(to bottom,
      rgba(0,0,0,0.0),
      rgba(0,0,0,0.55));
  }

  .place{
    font-size:11px;
    letter-spacing:0.2em;
    text-transform:uppercase;
    opacity:0.75;
    margin-bottom:8px;
  }

  .time{
    font-size:clamp(26px,3.8vw,34px);
    letter-spacing:0.06em;
    margin-bottom:8px;
    font-variant-numeric:tabular-nums;
  }

  .label{
    font-size:13px;
    letter-spacing:0.18em;
    text-transform:uppercase;
    opacity:0.78;
    margin-bottom:18px;
  }

  .poem{
    font-size:14px;
    line-height:1.7;
    max-width:520px;
    margin:0 auto;
    opacity:0.96;
    white-space:pre-line;
  }

  .poem small{
    display:block;
    margin-top:6px;
    font-size:12px;
    opacity:0.6;
  }

  @keyframes breathe{
    0%   { transform:scale(1.00); }
    50%  { transform:scale(1.04); }
    100% { transform:scale(1.00); }
  }

  /* ===== 상태별 스타일 ===== */

  /* 깊은 밤 · 0–4시 */
  body.state-deepnight .bulb-glow{
    background:
      radial-gradient(circle,
        rgba(190,210,255,0.78) 0%,
        rgba(120,150,220,0.55) 32%,
        transparent 70%);
    opacity:0.32;
    filter:blur(24px);
  }
  body.state-deepnight .bulb-core{
    opacity:0.25;
    background:
      radial-gradient(circle,
        rgba(230,240,255,0.95) 0%,
        rgba(190,210,255,0.85) 26%,
        rgba(90,120,210,0.55) 46%,
        rgba(10,18,40,0.0) 70%);
    filter:blur(3px);
  }
  body.state-deepnight .bulb-filament{
    opacity:0.35;
  }

  /* 새벽 · 5–8시 */
  body.state-dawn .bulb-glow{
    background:
      radial-gradient(circle,
        rgba(255,245,225,0.9) 0%,
        rgba(255,220,185,0.72) 32%,
        transparent 70%);
    opacity:0.4;
    filter:blur(22px);
  }
  body.state-dawn .bulb-core{
    opacity:0.4;
    background:
      radial-gradient(circle,
        rgba(255,252,240,0.96) 0%,
        rgba(255,230,190,0.9) 26%,
        rgba(255,190,135,0.6) 46%,
        rgba(40,24,12,0.0) 70%);
    filter:blur(3px);
  }
  body.state-dawn .bulb-filament{
    opacity:0.45;
  }

  /* 낮 · 9–15시 */
  body.state-day .bulb-glow{
    background:
      radial-gradient(circle,
        rgba(255,255,250,0.7) 0%,
        rgba(240,240,220,0.4) 32%,
        transparent 60%);
    opacity:0.18;
    filter:blur(20px);
  }
  body.state-day .bulb-core{
    opacity:0.12;
    background:
      radial-gradient(circle,
        rgba(255,255,245,0.9) 0%,
        rgba(235,235,220,0.65) 28%,
        rgba(210,210,190,0.35) 45%,
        rgba(40,24,12,0.0) 70%);
    filter:blur(4px);
  }
  body.state-day .bulb-filament{
    opacity:0.18;
  }

  /* 저녁 · 16–19시 */
  body.state-sunset .bulb-glow{
    background:
      radial-gradient(circle,
        rgba(255,245,230,0.95) 0%,
        rgba(255,215,175,0.8) 32%,
        transparent 72%);
    opacity:0.55;
    filter:blur(22px);
  }
  body.state-sunset .bulb-core{
    opacity:0.75;
    background:
      radial-gradient(circle,
        rgba(255,252,240,0.97) 0%,
        rgba(255,230,190,0.92) 26%,
        rgba(255,188,120,0.7) 46%,
        rgba(40,24,12,0.0) 72%);
    filter:blur(2px);
  }
  body.state-sunset .bulb-filament{
    opacity:0.85;
    filter:blur(0.4px);
  }

  /* 밤 · 20–23시 */
  body.state-night .bulb-glow{
    background:
      radial-gradient(circle,
        rgba(255,242,220,0.95) 0%,
        rgba(255,210,165,0.85) 30%,
        transparent 74%);
    opacity:0.6;
    filter:blur(20px);
  }
  body.state-night .bulb-core{
    opacity:0.9;
    background:
      radial-gradient(circle,
        rgba(255,252,242,0.98) 0%,
        rgba(255,230,190,0.94) 26%,
        rgba(255,188,120,0.75) 46%,
        rgba(40,24,12,0.0) 74%);
    filter:blur(2px);
  }
  body.state-night .bulb-filament{
    opacity:1;
    filter:blur(0.3px);
  }

  @media (max-width:640px){
    .layer{
      border-radius:18px;
      padding:72px 16px 28px;
    }
    .content{
      padding-top:36px;
    }
    .locations{
      top:12px;
      padding:6px 10px;
    }
    .loc-btn{
      font-size:10px;
      letter-spacing:0.12em;
      padding:4px 10px;
    }
    .bulb-wrap{
      top:38%;
      width:min(52vmin,320px);
      height:min(52vmin,320px);
    }
  }
</style>
</head>
<body>
  <div class="layer">
    <!-- 도시 선택 -->
    <div class="locations">
      <button class="loc-btn is-active"
              data-tz="local"
              data-label="Your device">
        Your device
      </button>
      <button class="loc-btn"
              data-tz="America/New_York"
              data-label="New York">
        New York
      </button>
      <button class="loc-btn"
              data-tz="Europe/London"
              data-label="London">
        London
      </button>
      <button class="loc-btn"
              data-tz="Asia/Seoul"
              data-label="Seoul">
        Seoul
      </button>
      <button class="loc-btn"
              data-tz="Australia/Sydney"
              data-label="Sydney">
        Sydney
      </button>
    </div>

    <!-- 전구 -->
    <div class="bulb-wrap" aria-hidden="true">
      <div class="bulb-glow"></div>
      <div class="bulb-glass">
        <div class="bulb-core"></div>
        <div class="bulb-filament"></div>
      </div>
    </div>

    <!-- 텍스트 -->
    <div class="content">
      <div id="place" class="place">Your device · Local time</div>
      <div id="time" class="time">--:--:--</div>
      <div id="label" class="label">—</div>
      <div id="poem" class="poem">
지금 이 시간, 이 위치의 빛을 불러오는 중입니다.
<small>Fetching the light for this place and this hour.</small>
      </div>
    </div>
  </div>

<script>
  const timeEl  = document.getElementById('time');
  const placeEl = document.getElementById('place');
  const labelEl = document.getElementById('label');
  const poemEl  = document.getElementById('poem');
  const locButtons = document.querySelectorAll('.loc-btn');

  const STATES = ['deepnight','dawn','day','sunset','night'];

  let currentTZ = 'local';
  let currentLabel = 'Your device';

  function pad(n){ return n < 10 ? '0' + n : '' + n; }

  function getState(hour){
    if(hour >= 0 && hour < 5)   return 'deepnight';
    if(hour >= 5 && hour < 9)   return 'dawn';
    if(hour >= 9 && hour < 16)  return 'day';
    if(hour >= 16 && hour < 20) return 'sunset';
    return 'night';
  }

  function getTextFor(state, hour, minute, label){
    const hhmm = `${pad(hour)}:${pad(minute)}`;
    const whereK = (currentTZ === 'local') ? '여기' : `${label}`;
    const whereEn = (currentTZ === 'local') ? 'here' : label;

    if(state === 'deepnight'){
      return {
        label: `깊은 밤 · Deep Night`,
        poem:
`${whereK}의 ${hhmm}
빛은 가장 적은 말로 머물러 있습니다.
<small>In ${whereEn}, light stays with the fewest words.</small>`
      };
    }
    if(state === 'dawn'){
      return {
        label: `새벽 · Dawn`,
        poem:
`${whereK}의 ${hhmm}
어둠과 아침 사이, 빛이 천천히 숨을 들이킵니다.
<small>Between night and morning in ${whereEn}, light takes a slow breath in.</small>`
      };
    }
    if(state === 'day'){
      return {
        label: `낮 · Daylight`,
        poem:
`${whereK}의 ${hhmm}
너무 밝아서, 조명은 잠시 잊혀집니다.
<small>So bright in ${whereEn} that the lamp can afford to be forgotten.</small>`
      };
    }
    if(state === 'sunset'){
      return {
        label: `저녁 · Golden Hour`,
        poem:
`${whereK}의 ${hhmm}
해가 물러나자, 빛은 제 목소리를 찾습니다.
<small>As the sun retreats in ${whereEn}, the lamp finds its own voice.</small>`
      };
    }
    return {
      label: `밤 · Night`,
      poem:
`${whereK}의 ${hhmm}
어둠이 짙어질수록, 빛은 더 또렷해집니다.
<small>The darker it grows in ${whereEn}, the clearer the light becomes.</small>`
    };
  }

  function getNowForTZ(tz){
    if(tz === 'local') return new Date();
    const now = new Date();
    const localeString = now.toLocaleString('en-US', { timeZone: tz });
    return new Date(localeString);
  }

  function updateScene(){
    const now = getNowForTZ(currentTZ);
    const hour  = now.getHours();
    const min   = now.getMinutes();
    const sec   = now.getSeconds();

    timeEl.textContent = `${pad(hour)}:${pad(min)}:${pad(sec)}`;

    if(currentTZ === 'local'){
      placeEl.textContent = 'Your device · Local time';
    }else{
      placeEl.textContent = `${currentLabel} · Local time`;
    }

    const state = getState(hour);
    STATES.forEach(s => document.body.classList.remove(`state-${s}`));
    document.body.classList.add(`state-${state}`);

    const t = getTextFor(state, hour, min, currentLabel);
    labelEl.textContent = t.label;
    poemEl.innerHTML    = t.poem;
  }

  // 도시 버튼 클릭
  locButtons.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      locButtons.forEach(b=>b.classList.remove('is-active'));
      btn.classList.add('is-active');
      currentTZ = btn.dataset.tz || 'local';
      currentLabel = btn.dataset.label || 'This place';
      updateScene();
    });
  });

  // 초기 실행 + 1초마다 업데이트
  updateScene();
  setInterval(updateScene, 1000);
</script>
</body>
</html>
